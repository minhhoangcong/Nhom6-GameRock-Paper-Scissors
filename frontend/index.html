<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>K√©o B√∫a Bao - Multiplayer Rooms</title>
    <link rel="stylesheet" href="style.css" />
    <audio id="bgm" src="assets/sounds/bgm.mp3" preload="auto" loop></audio>
    <audio
      id="ui-click-sound"
      src="assets/sounds/ui-click.mp3"
      preload="auto"
    ></audio>

    <audio
      id="click-sound"
      src="assets/sounds/click.mp3"
      preload="auto"
    ></audio>
    <audio id="win-sound" src="assets/sounds/win.mp3" preload="auto"></audio>
    <audio id="lose-sound" src="assets/sounds/lose.mp3" preload="auto"></audio>
    <audio id="draw-sound" src="assets/sounds/draw.mp3" preload="auto"></audio>
  </head>
  <body>
    <div class="container">
      <h1>‚úäÔ∏è ü§ö ‚úå K√©o B√∫a Bao - Multiplayer</h1>
      <div class="audio-controls">
        <button id="bgm-toggle" onclick="toggleBGM()">üéµ Nh·∫°c: T·∫Øt</button>
        <button id="sfx-toggle" onclick="toggleSFX()">üîî Hi·ªáu ·ª©ng: B·∫≠t</button>
      </div>

      <!-- M√†n h√¨nh ch√≠nh -->
      <div id="main-screen" class="screen active">
        <div class="player-info">
          <div class="name-input">
            <label for="player-name">T√™n c·ªßa b·∫°n:</label>
            <input
              type="text"
              id="player-name"
              placeholder="Nh·∫≠p t√™n..."
              maxlength="20"
            />
            <button onclick="setPlayerName()">C·∫≠p nh·∫≠t</button>
          </div>
          <div class="current-player">
            <span>Ng∆∞·ªùi ch∆°i: <span id="player-id">ƒêang k·∫øt n·ªëi...</span></span>
          </div>
          <div class="net-stats">
            üì∂ Ping: <span id="ping-value">--</span> ms
          </div>
        </div>

        <div class="main-actions">
          <button class="action-btn primary" onclick="showCreateRoom()">
            üè† T·∫°o ph√≤ng m·ªõi
          </button>
          <button class="action-btn secondary" onclick="refreshRooms()">
            üîÑ L√†m m·ªõi danh s√°ch
          </button>
          <button class="action-btn secondary" onclick="startVsBot()">
            ü§ñ Ch∆°i v·ªõi m√°y
          </button>
          <button class="action-btn primary" onclick="quickPlay()">
            ‚ö° Ch∆°i ngay
          </button>
        </div>

        <div class="rooms-section">
          <h2>üìã Danh s√°ch ph√≤ng</h2>
          <div id="rooms-list" class="rooms-grid">
            <div class="loading">ƒêang t·∫£i danh s√°ch ph√≤ng...</div>
          </div>
        </div>
      </div>

      <!-- M√†n h√¨nh t·∫°o ph√≤ng -->
      <div id="create-room-screen" class="screen">
        <h2>üè† T·∫°o ph√≤ng m·ªõi</h2>
        <div class="form-group">
          <label for="room-name">T√™n ph√≤ng:</label>
          <input
            type="text"
            id="room-name"
            placeholder="Nh·∫≠p t√™n ph√≤ng..."
            maxlength="30"
          />
        </div>
        <div class="form-group">
          <label for="max-players">S·ªë ng∆∞·ªùi ch∆°i:</label>
          <select id="max-players" disabled>
            <option value="2" selected>2 ng∆∞·ªùi</option>
          </select>
          <small style="color: #666">Ch·ªâ h·ªó tr·ª£ 2 ng∆∞·ªùi ch∆°i</small>
        </div>
        <div class="form-actions">
          <button class="action-btn primary" onclick="createRoom()">
            T·∫°o ph√≤ng
          </button>
          <button class="action-btn secondary" onclick="showMainScreen()">
            H·ªßy
          </button>
        </div>
      </div>

      <!-- M√†n h√¨nh ph√≤ng ch∆°i -->
      <div id="game-room-screen" class="screen">
        <div class="room-header">
          <h2 id="room-name">Ph√≤ng ch∆°i</h2>
          <button class="leave-btn" onclick="leaveRoom()">üö™ R·ªùi ph√≤ng</button>
        </div>

                <div id="game-result" class="game-result-text"></div>

                <!-- 3 n√∫t ch·ªçn: GI·ªÆ NGUY√äN id & onclick -->
                <div class="choices">
                  <button
                    class="choice-btn"
                    onclick="sendChoice('rock')"
                    id="rock-btn"
                  >
                    <div class="choice-icon">ü™®</div>
                    <div class="choice-text">B√∫a</div>
                  </button>
                  <button
                    class="choice-btn"
                    onclick="sendChoice('paper')"
                    id="paper-btn"
                  >
                    <div class="choice-icon">üìÑ</div>
                    <div class="choice-text">Bao</div>
                  </button>
                  <button
                    class="choice-btn"
                    onclick="sendChoice('scissors')"
                    id="scissors-btn"
                  >
                    <div class="choice-icon">‚úÇÔ∏è</div>
                    <div class="choice-text">K√©o</div>
                  </button>
                </div>

                <div class="ready-section" style="margin-top: 10px">
                  <button
                    id="ready-btn"
                    class="ready-btn"
                    onclick="toggleReady()"
                  >
                    ‚úÖ S·∫µn s√†ng
                  </button>
                  <button
                    id="new-game-btn"
                    class="new-game-btn"
                    onclick="requestNewGame()"
                    style="display: none"
                  >
                    üîÑ Ch∆°i l·∫°i
                  </button>
                </div>
              </div>

              <div class="section-card">
                <h3>üßæ L·ªãch s·ª≠ tr·∫≠n ƒë·∫•u</h3>
                <div id="history-list" class="scroll-box"></div>
              </div>
            </div>

            <!-- RIGHT: players + scoreboard + chat -->
            <div class="room-right">
              <div class="section-card">
                <h3>üë• Ng∆∞·ªùi ch∆°i trong ph√≤ng</h3>
                <div id="players-list"></div>
              </div>

              <div class="section-card">
                <h3>üèÜ B·∫£ng ƒëi·ªÉm</h3>
                <div id="scoreboard"></div>
              </div>

              <div class="section-card">
                <h3>üí¨ Chat ph√≤ng</h3>
                <div id="chat-messages" class="chat-messages scroll-box"></div>
                <div class="chat-input-row">
                  <input
                    type="text"
                    id="chat-input"
                    placeholder="Nh·∫Øn g√¨ ƒë√≥..."
                    maxlength="100"
                    autocomplete="off"
                  />
                  <button class="chat-send-btn" onclick="sendChat()">
                    G·ª≠i
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>
        <!-- ========= /GAME ROOM LAYOUT ========= -->
      </div>

      <!-- Th√¥ng b√°o -->
      <div id="notification" class="notification"></div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
